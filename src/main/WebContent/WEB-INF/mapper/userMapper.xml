<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carrot.repository.UserRepository">        


		<select id="selectById" resultType="com.carrot.domain.UserVO">
			select * from user_info where id = #{id}
		</select>
	
		<select id="selectByAuth" resultType="com.carrot.domain.AuthVO">
			select * from role where user_id = #{user_id}
		</select>
		
		<insert id="signUp" parameterType="com.carrot.domain.UserVO">
			insert into user_info(id, nickname, password, email, loc1, loc2, loc3) values 
			(#{id}, #{nickname, jdbcType=VARCHAR}, #{password}, #{email}, #{loc1, jdbcType=VARCHAR }, #{loc2, jdbcType=VARCHAR}, #{loc3, jdbcType=VARCHAR})
		</insert>

		<insert id="signUp_auth" parameterType="com.carrot.domain.AuthVO">
			insert into role(user_Id, auth) values (#{user_id}, 'ROLE_MEMBER')
		</insert>
		
		<select id="idCheck" parameterType="String" resultType="Integer">
      SELECT count(*) FROM user_info WHERE id = #{id}
    </select>
    
 		<select id="nicCheck" parameterType="String" resultType="Integer">
      SELECT count(*) FROM user_info WHERE nickname = #{nickname}
    </select>
    
 		<select id="emailCheck" parameterType="String" resultType="Integer">
      SELECT count(*) FROM user_info WHERE email = #{email}
    </select>
</mapper>	